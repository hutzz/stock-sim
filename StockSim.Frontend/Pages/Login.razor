@page "/login"
@using StockSim.Frontend.Models
@using StockSim.Frontend.Services
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components
@using System.Text.Json
@inject NavigationManager NavigationManager
@inject ILoginService LoginService
@inject ITokenService TokenService

<PageTitle>Log In</PageTitle>

<div id="wrapper">
    <div id="text-wrapper">
        <EditForm Model="@user" OnValidSubmit="Valid" OnInvalidSubmit="Invalid" >
            <div class="form">
                <DataAnnotationsValidator />
                <div class="input-text">
                    <InputText class="input" id="username" @bind-Value="user.Username" placeholder="Username" required />
                </div>
                <ValidationMessage class="validation-message" For="() => user.Username" />
                <div class="input-text">
                    <InputText class="input" id="password" type="password" @bind-Value="user.Password" placeholder="Password" required />
                </div>
                <ValidationMessage class="validation-message" For="() => user.Password" />
                <input id="submit" type="submit" />
                <div>
                    @if (!string.IsNullOrEmpty(message)) {
                        <div class="validation-message">@message</div>
                    }
                </div>
            </div>
        </EditForm>
        <div>
            <p id="redirect">Don't have an account? <a href="https://localhost:7003/register">Register</a></p>
        </div>
    </div>
</div>

<style>
    :root {
        --main-background-colour: rgb(44, 43, 43);
        --accent-colour-1: rgb(29, 28, 28);
        --accent-colour-2: rgb(75, 115, 227);
        --accent-colour-3: rgb(44, 62, 89);
        --main-font-colour: white;
    }

    ::placeholder {
        color: var(--main-font-colour);
        font-size: 0.75vw;
    }

    .validation-message {
        margin-top: 1%;
    }

    #wrapper {
        background-color: var(--main-background-colour);
    }

    .input {
        box-sizing: border-box;
        border-radius: 16px 16px;
        border: none;
        outline: none;
        width: 100%;
        height: 100%;
        background-color: var(--accent-colour-3);
        padding-left: 0.5vw;
        font-size: 0.75vw;
        color: var(--main-font-colour);
        caret-color: var(--main-font-colour);
    }
    
    .input:focus::placeholder {
        color: transparent;
    }
</style>
